(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{35:function(e,t,n){e.exports=n(61)},44:function(e,t,n){},45:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),s=n(1),u=n(13),l=(n(44),n(45),n(4)),i=n(9),m=n.n(i),p=n(16),b=n(10),f=n(31),d=n(32),E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"FINISH_LOADING":return!1;default:return e}},O=n(3),_=function(e){return{type:"SET_POSTS",payload:e}},h=function(e){return{type:"SET_POST_ID",payload:e}},v=function(e){return{type:"SET_POST_ERROR_STATE",error:e}},j=function(e){return{type:"SET_POST_ERROR_TEXT",error:e}},T={posts:[],isErrorPost:!0,errorText:"",postId:0,userId:0},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return Object(O.a)(Object(O.a)({},e),{},{posts:t.payload});case"SET_POST_ERROR_STATE":return Object(O.a)(Object(O.a)({},e),{},{isErrorPost:t.error});case"SET_POST_ERROR_TEXT":return Object(O.a)(Object(O.a)({},e),{},{errorText:t.error});case"SET_POST_ID":return Object(O.a)(Object(O.a)({},e),{},{postId:t.payload});default:return e}},y=function(e){return{type:"SET_COMMENTS",payload:e}},N=function(e){return{type:"SET_POST_DETAILS_ERROR_TEXT",error:e}},P={post:{},comments:[],commentId:0,errorPostDetails:!0},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS_DETAILS":return Object(O.a)(Object(O.a)({},e),{},{post:t.payload});case"SET_COMMENTS":return Object(O.a)(Object(O.a)({},e),{},{comments:t.payload});case"SET_COMMENT_ID":return Object(O.a)(Object(O.a)({},e),{},{commentId:t.payload});case"SET_POST_DETAILS_ERROR_TEXT":return Object(O.a)(Object(O.a)({},e),{},{errorPostDetails:t.error});default:return e}},D="https://mate-api.herokuapp.com",g=function(e,t){return fetch("".concat(D).concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status));return e.json()})).then((function(e){return e.data}))},w=function(e){return g(e,{method:"DELETE"})},C=function(e){return g("/posts?userId=".concat(e),{method:"GET"})},L=function(e){return g("/posts/".concat(e),{method:"GET"})},R=function(e){return g("/comments?postId=".concat(e),{method:"GET"})},k=Object(b.combineReducers)({loading:E,posts:S,postDetails:I}),A=function(e){return e.posts.posts},x=function(e){return e.postDetails.comments},G=function(e){return e.postDetails.post},M=function(e){return e.posts.postId},F=function(e){return e.postDetails.commentId},q=function(e){return e.loading},H=function(e){return e.posts.isErrorPost},U=function(e){return e.posts.errorText},X=function(e){return e.postDetails.errorPostDetails},J=function(){return function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),e.prev=1,e.next=4,g("/posts",{method:"GET"});case 4:n=e.sent,t(v(!1)),t(_(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(v(!0)),t(j(e.t0.message));case 13:t({type:"FINISH_LOADING"});case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},B=Object(b.createStore)(k,Object(f.composeWithDevTools)(Object(b.applyMiddleware)(d.a))),W=function(){var e=Object(s.b)(),t=Object(s.c)(q),n=Object(l.d)(),a=Object(l.e)(),c=new URLSearchParams(a.search);return r.a.createElement("button",{type:"button",className:"button button__start",onClick:function(){c.delete("query"),c.delete("selectedId"),n.push({search:c.toString()}),e(J())},disabled:t},t?"Loading...":"Load")},Y=n(12),K=n(33),V=n.n(K),z=function(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(Y.a)(t,2),c=n[0],o=n[1],u=Object(l.e)(),i=Object(l.d)(),m=new URLSearchParams(u.search),p=m.get("selectedId")||"",b=Object(a.useCallback)(V()((function(e){e?m.set("query",e):m.delete("query"),i.push({search:m.toString()})}),500),[]),f=Object(a.useCallback)((function(t){Number(t)?(m.set("selectedId",t),e(h(0))):m.delete("selectedId"),i.push({search:m.toString()})}),[p]);return r.a.createElement("header",{className:"App__header"},r.a.createElement("label",null,"Title: \xa0",r.a.createElement("input",{type:"text",name:"title",value:c,placeholder:"Search by title",className:"App__user-input",onChange:function(e){var t=e.target.value;o(t),b(t)}})),r.a.createElement("label",null,"Select a user: \xa0",r.a.createElement("select",{className:"App__user-selector",value:p,onChange:function(e){var t=e.target.value;f(t)}},r.a.createElement("option",{value:"0"},"All users"),r.a.createElement("option",{value:"1"},"Leanne Graham"),r.a.createElement("option",{value:"2"},"Ervin Howell"),r.a.createElement("option",{value:"3"},"Clementine Bauch"),r.a.createElement("option",{value:"4"},"Patricia Lebsack"),r.a.createElement("option",{value:"5"},"Chelsey Dietrich"),r.a.createElement("option",{value:"6"},"Mrs. Dennis Schulist"),r.a.createElement("option",{value:"7"},"Kurtis Weissnat"),r.a.createElement("option",{value:"8"},"Nicholas Runolfsdottir V"),r.a.createElement("option",{value:"9"},"Glenna Reichert"),r.a.createElement("option",{value:"10"},"Leanne Graham"))))},Q=(n(58),function(){var e=Object(s.b)(),t=Object(s.c)(A),n=Object(s.c)(M),c=Object(l.e)(),o=new URLSearchParams(c.search),u=o.get("query")||"",i=o.get("selectedId")||"",b=function(t){return e(function(e){return function(){var t=Object(p.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(e);case 3:a=t.sent,n(v(!1)),n(_(a)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n(v(!0)),n(j(t.t0.message));case 12:n({type:"FINISH_LOADING"});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},f=function(t){return e(function(e){return function(){var t=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{Promise.all([R(e),L(e)]).then((function(e){n(N(!1)),n({type:"SET_POSTS_DETAILS",payload:e[1]}),n(y(e[0]))}))}catch(a){console.log(a.message),n(N(!0))}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};Object(a.useEffect)((function(){var t=Number(i);0!==t?b(t):e(J())}),[i]),Object(a.useEffect)((function(){0!==n&&f(n)}),[n]);var d=Object(a.useMemo)((function(){if(!u)return t;var e=u.toLowerCase();return t.filter((function(t){var n=t.title;return" ".concat(n||"").toLowerCase().includes(e)}))}),[t,u]),E=Object(a.useCallback)((function(t){var n=d.filter((function(e){return e.id!==t}));e(_(n)),w("/posts/".concat(t))}),[t]);return r.a.createElement("div",{className:"PostsList"},r.a.createElement("ul",{className:"PostsList__list"},0!==d.length?d.map((function(t){return r.a.createElement("li",{key:t.id,className:"PostsList__item"},r.a.createElement("div",null,r.a.createElement("b",null,"`[User # ",t.userId,"]: `"),t.title),r.a.createElement("div",{className:"PostsList__container"},n===t.id?r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return e(h(0))}},"Close"):r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return e(h(t.id))}},"Open"),r.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return E(t.id)}},"Remove")))})):r.a.createElement("h3",null," No Posts found")))}),Z=(n(59),n(34)),$=n(19),ee=(n(60),function(){var e=Object(s.b)(),t=Object(s.c)(M),n=Object(s.c)(x),c=Object(a.useState)({body:"",name:"",email:""}),o=Object(Y.a)(c,2),u=o[0],l=o[1],i=function(e){var t=e.target,n=t.name,a=t.value;l((function(e){return Object(O.a)(Object(O.a)({},e),{},Object($.a)({},n,a))}))};return r.a.createElement("form",{className:"NewCommentForm",onSubmit:function(a){a.preventDefault();var r,c=Object(O.a)(Object(O.a)({},u),{},{postId:t,id:Number(new Date)});e(y([].concat(Object(Z.a)(n),[c]))),r=Object(O.a)(Object(O.a)({},u),{},{postId:t}),fetch("".concat(D,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify({postId:r.postId,name:r.name,email:r.email,body:r.body})}).then((function(e){if(!e.ok)throw new Error("".concat(e.status,"- Error"));return e.json()})),l({body:"",name:"",email:""})}},r.a.createElement("div",{className:"form-field"},r.a.createElement("input",{required:!0,type:"text",name:"name",value:u.name,placeholder:"Your name",className:"NewCommentForm__input",onChange:function(e){return i(e)}})),r.a.createElement("div",{className:"form-field"},r.a.createElement("input",{required:!0,type:"text",name:"email",value:u.email,placeholder:"Your email",className:"NewCommentForm__input",onChange:function(e){return i(e)}})),r.a.createElement("div",{className:"form-field"},r.a.createElement("textarea",{required:!0,name:"body",placeholder:"Type comment here",value:u.body,className:"NewCommentForm__input",onChange:function(e){return i(e)}})),r.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))}),te=function(){var e=Object(s.b)(),t=Object(s.c)(x),n=Object(s.c)(G),c=Object(s.c)(F),o=Object(s.c)(M),u=Object(a.useState)(!1),l=Object(Y.a)(u,2),i=l[0],b=l[1],f=function(t,n){return e(function(e,t){return function(){var n=Object(p.a)(m.a.mark((function n(a){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w("/comments/".concat(e));case 3:return n.next=5,R(t);case 5:r=n.sent,a(y(r)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))};return Object(a.useEffect)((function(){0!==c&&f(c,o)}),[c]),r.a.createElement("div",{className:"PostDetails"},r.a.createElement("h2",null,"Post details: [User#",n.userId,"]"),r.a.createElement("section",{className:"PostDetails__post"},r.a.createElement("h3",null,"Title: ",n.title),r.a.createElement("p",{className:"PostDetails__list-item"},"Details: ",n.body)),r.a.createElement("section",{className:"PostDetails__comments"},t.length>0&&r.a.createElement("button",{type:"button",className:"button",onClick:function(){b((function(e){return!e}))}},i?"Show ".concat(t.length," comments"):"Hide ".concat(t.length," comments")),!i&&r.a.createElement("ul",{className:"PostDetails__list"},t.map((function(t){return r.a.createElement("li",{key:t.id,className:"PostDetails__list-item"},r.a.createElement("p",null,t.body),r.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){e(function(e){return{type:"SET_COMMENT_ID",payload:e}}(t.id))}},"X"))})))),r.a.createElement("section",null,r.a.createElement("div",{className:"PostDetails__form-wrapper"},r.a.createElement(ee,null))))},ne=function(){var e=Object(s.c)(U);return r.a.createElement("h3",{className:"error"},e)},ae=function(){var e=Object(s.c)(q),t=Object(s.c)(H),n=Object(s.c)(X),a=Object(s.c)(M);return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,e?"Loading...":"Redux list of posts:"),t&&r.a.createElement(W,null),r.a.createElement("div",{className:"App"},!t&&r.a.createElement(z,null),r.a.createElement("main",{className:"App__main"},r.a.createElement("div",{className:"App__sidebar"},t?r.a.createElement(ne,null):r.a.createElement(Q,null)),r.a.createElement("div",{className:"App__content"},!1===n&&0!==a?r.a.createElement(te,null):r.a.createElement("h3",null,"No Posts Details ")))))},re=function(){return r.a.createElement(s.a,{store:B},r.a.createElement(u.a,null,r.a.createElement(ae,null)))};o.a.render(r.a.createElement(re,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.4a2a5f84.chunk.js.map